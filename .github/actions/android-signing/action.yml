name: 'Android App Signing'
description: 'é…ç½® Android åº”ç”¨ç­¾åçš„å¯å¤ç”¨ Action'

inputs:
  keystore-base64:
    description: 'Base64 ç¼–ç çš„ keystore æ–‡ä»¶'
    required: true
  
  key-alias:
    description: 'å¯†é’¥åˆ«å'
    required: true
  
  store-password:
    description: 'Keystore å¯†ç '
    required: true
  
  key-password:
    description: 'å¯†é’¥å¯†ç '
    required: true

runs:
  using: 'composite'
  steps:
    - name: ğŸ” è®¾ç½®ç­¾åé…ç½®
      shell: bash
      run: |
        echo "${{ inputs.keystore-base64 }}" | base64 --decode > android/app/upload-keystore.jks
        echo "storeFile=upload-keystore.jks" >> android/key.properties
        echo "keyAlias=${{ inputs.key-alias }}" >> android/key.properties
        echo "storePassword=${{ inputs.store-password }}" >> android/key.properties
        echo "keyPassword=${{ inputs.key-password }}" >> android/key.properties
        # è°ƒè¯•ä¿¡æ¯ï¼ˆä¸ä¼šæ˜¾ç¤ºæ•æ„Ÿå†…å®¹ï¼‰
        echo "æ£€æŸ¥ key.properties æ˜¯å¦åˆ›å»ºæˆåŠŸ:"
        ls -la android/key.properties
        echo "æ£€æŸ¥ keystore æ˜¯å¦åˆ›å»ºæˆåŠŸ:"
        ls -la android/app/upload-keystore.jks